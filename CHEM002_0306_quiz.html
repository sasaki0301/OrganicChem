<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Chapter 3 ‚Äì Comprehensive Assessment</title>

<style>
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: linear-gradient(135deg, #e8f9f1, #f7faff);
    margin: 0;
    padding: 40px 20px;
    color: #222;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
  }

  .quiz-container {
    background: #ffffff;
    border-radius: 18px;
    padding: 40px 50px;
    box-shadow: 0 8px 28px rgba(0, 0, 0, 0.08);
    width: 95%;
    max-width: 850px;
    text-align: center;
  }

  h2 { color: #136f63; margin-bottom: 25px; font-size: 1.8em; }

  .progress-wrapper {
    background: #e9f5ef;
    border-radius: 8px;
    height: 14px;
    width: 100%;
    margin-bottom: 25px;
    overflow: hidden;
  }
  .progress-bar {
    height: 100%;
    background: linear-gradient(to right, #136f63, #2b7de9);
    width: 0%;
    transition: width 0.4s ease;
  }
  .progress-text {
    text-align: right;
    font-size: 0.95em;
    color: #174ea6;
    margin-bottom: 10px;
    font-weight: 600;
  }

  .question {
    font-size: 1.25em;
    font-weight: 600;
    color: #174ea6;
    margin-bottom: 20px;
  }

  .choices { display: flex; flex-direction: column; gap: 12px; margin-bottom: 25px; }

  .choice {
    background: #e8ecf8;
    border: none;
    border-radius: 10px;
    padding: 14px 18px;
    cursor: pointer;
    text-align: left;
    font-size: 1.05em;
    transition: all 0.2s ease;
  }
  .choice:hover { background: #d3dbf8; transform: translateY(-2px); }
  .choice.selected { background: #174ea6; color: #fff; transform: scale(1.02); }

  .explanation {
    background: #eef3ff;
    border-radius: 10px;
    padding: 14px 18px;
    margin-top: 10px;
    display: none;
    text-align: left;
    font-size: 1.05em;
  }

  .next-btn {
    background: #136f63;
    color: #fff;
    border: none;
    padding: 12px 26px;
    border-radius: 10px;
    font-size: 1.05em;
    cursor: pointer;
    font-weight: bold;
    transition: 0.2s;
    margin-top: 15px;
  }
  .next-btn:hover { background: #0f5b52; }

  .result {
    font-size: 1.4em;
    font-weight: bold;
    color: #174ea6;
    margin-top: 20px;
  }
  .stars { font-size: 2.5em; margin-top: 10px; }

  .quiz-nav {
    margin-top: 25px;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 10px;
  }

  .quiz-btn {
    background: #e8ecf8;
    color: #174ea6;
    border: none;
    border-radius: 8px;
    padding: 10px 20px;
    font-size: 0.95em;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .quiz-btn:hover { background: #d3dbf8; transform: translateY(-2px); }
  .quiz-btn.primary { background: #136f63; color: #fff; }
</style>
</head>

<body>
<div class="quiz-container">

<h2>Chapter 3 ‚Äì Comprehensive Assessment</h2>
<div class="progress-text" id="progressText">Question 1 of 25</div>
<div class="progress-wrapper"><div class="progress-bar" id="progressBar"></div></div>

<div id="quizBox"></div>
<button id="nextBtn" class="next-btn" style="display:none;">Next</button>

</div>

<script>
const quizData = [
  /* POLARITY */
  { q:"1. Electronegativity is best defined as:", 
    c:["The ability of an atom to gain mass",
       "The attraction of an atom for shared electrons",
       "The amount of energy in a proton",
       "The number of neutrons in the nucleus"],
    a:1,
    e:"Electronegativity measures how strongly an atom pulls shared electrons." },

  { q:"2. Which bond is the MOST polar?", 
    c:["H‚ÄìH","C‚ÄìH","O‚ÄìH","N‚ÄìH"],
    a:2,
    e:"O‚ÄìH has the greatest electronegativity difference." },

  { q:"3. A molecule is nonpolar if:", 
    c:["It contains at least one polar bond",
       "Its dipoles cancel due to symmetry",
       "It contains no lone pairs",
       "It is linear or tetrahedral only"],
    a:1,
    e:"Polarity depends on vector cancellation, not the presence of polar bonds alone." },

  { q:"4. Which molecule is polar?", 
    c:["CO‚ÇÇ","CH‚ÇÑ","NH‚ÇÉ","BF‚ÇÉ"],
    a:2,
    e:"NH‚ÇÉ is trigonal pyramidal ‚Üí dipoles do not cancel." },

  /* FORMAL CHARGE */
  { q:"5. What is the formal charge on oxygen in OH‚Åª?", 
    c:["0","‚Äì1","+1","‚Äì2"],
    a:1,
    e:"6 ‚Äì (6 nonbonding + 1 bond) = ‚Äì1" },

  { q:"6. A good Lewis structure usually has:", 
    c:["Maximum charges possible","No octets","Low formal charges","Atoms moved to achieve symmetry"],
    a:2,
    e:"Lower formal charge = more stability." },

  { q:"7. Which atom is most stable carrying a negative formal charge?", 
    c:["Carbon","Fluorine","Oxygen","Hydrogen"],
    a:2,
    e:"More electronegative atoms stabilize negative charges better." },

  /* RESONANCE */
  { q:"8. Resonance structures differ only in:", 
    c:["Electron placement","Atom arrangement","Number of atoms","Mass of particles"],
    a:0,
    e:"Resonance moves electrons, never atoms." },

  { q:"9. Which is TRUE about the resonance hybrid?", 
    c:["It switches rapidly between structures",
       "It is an average of all valid contributors",
       "It is always identical to the major contributor",
       "It only applies to ions"],
    a:1,
    e:"A hybrid represents electron delocalization." },

  { q:"10. Which contributes MOST to a resonance hybrid?", 
    c:["Structure with full octets","Structure with many charges",
       "Structure with negative charge on carbon",
       "One with maximum separation of charges"],
    a:0,
    e:"Full octets + minimal charge separation = most stable." },

  /* ACIDS / BASES */
  { q:"11. Bronsted‚ÄìLowry acid:", 
    c:["Accepts electrons","Donates electrons","Donates H‚Å∫","Accepts H‚Å∫"],
    a:2,
    e:"Bronsted acids donate protons." },

  { q:"12. The conjugate base of H‚ÇÇCO‚ÇÉ is:", 
    c:["HCO‚ÇÉ‚Åª","CO‚ÇÉ¬≤‚Åª","OH‚Åª","H‚ÇÉO‚Å∫"],
    a:0,
    e:"Removing one H‚Å∫ gives HCO‚ÇÉ‚Åª." },

  { q:"13. Lewis acids are defined as:", 
    c:["Proton donors","Electron pair donors","Electron pair acceptors","Compounds with nitrogen"],
    a:2,
    e:"Lewis acids accept electron pairs." },

  { q:"14. Which is a Lewis acid?", 
    c:["NH‚ÇÉ","H‚ÇÇO","BF‚ÇÉ","CH‚ÇÑ"],
    a:2,
    e:"BF‚ÇÉ has an empty p orbital ‚Üí accepts electrons." },

  { q:"15. Which is the stronger base?", 
    c:["NH‚ÇÉ","Aniline (C‚ÇÜH‚ÇÖNH‚ÇÇ)"],
    a:0,
    e:"Aniline‚Äôs lone pair is delocalized ‚Üí weaker base." },

  /* ORGANIC ACIDS/BASES */
  { q:"16. Carboxylic acids are stronger than alcohols because:", 
    c:["Alcohols have more hydrogens",
       "Carboxylates are resonance-stabilized",
       "Carbonyl groups donate electrons",
       "OH groups are inert"],
    a:1,
    e:"Carboxylates have two resonance forms ‚Üí very stable." },

  { q:"17. Which increases acidity?", 
    c:["Electron-donating groups","Electron-withdrawing groups","Adding methyl groups","Removing oxygen"],
    a:1,
    e:"E‚ÄìW groups stabilize the conjugate base." },

  { q:"18. Which is the strongest acid?", 
    c:["Ethanol","Phenol","Acetic acid"],
    a:2,
    e:"Acetic acid‚Äôs conjugate base is resonance-stabilized." },

  /* APPLICATION / SCENARIO QUESTIONS */
  { q:"19. Which bond is more polar: C‚ÄìF or C‚ÄìO?", 
    c:["C‚ÄìF","C‚ÄìO","Both equal","Neither is polar"],
    a:0,
    e:"F is the most electronegative element ‚Üí strongest dipole." },

  { q:"20. Which molecule can show resonance?", 
    c:["CH‚ÇÑ","CO‚ÇÉ¬≤‚Åª","NH‚ÇÑ‚Å∫","C‚ÇÇH‚ÇÜ"],
    a:1,
    e:"Carbonate has 3 equivalent resonance forms." },

  { q:"21. Which species is the strongest Lewis base?", 
    c:["Cl‚Åª","H‚ÇÇO","NO‚ÇÉ‚Åª","BF‚ÇÉ"],
    a:0,
    e:"Cl‚Åª has a full lone pair & negative charge ‚Üí strong donor." },

  { q:"22. Which conjugate base is MOST stable?", 
    c:["CH‚ÇÉO‚Åª","CH‚ÇÉCOO‚Åª","NH‚ÇÇ‚Åª","HO‚Åª"],
    a:1,
    e:"Carboxylate has resonance stabilization." },

  { q:"23. A molecule with polar bonds but a nonpolar shape is:", 
    c:["NH‚ÇÉ","H‚ÇÇO","CO‚ÇÇ","CH‚ÇÉCl"],
    a:2,
    e:"CO‚ÇÇ is linear ‚Üí dipoles cancel." },

  { q:"24. A negative charge is most stable when placed on:", 
    c:["Carbon","Nitrogen","Oxygen","Fluorine"],
    a:3,
    e:"Fluorine is most electronegative ‚Üí stabilizes negative charge best." },

  { q:"25. What is the conjugate acid of NH‚ÇÉ?", 
    c:["NH‚ÇÇ‚Åª","NH‚ÇÑ‚Å∫","N¬≤‚Åª","NH‚ÇÉ‚Å∫"],
    a:1,
    e:"NH‚ÇÉ gains H‚Å∫ ‚Üí NH‚ÇÑ‚Å∫." },
];

let current = 0, score = 0, selected = null;
const quizBox = document.getElementById("quizBox");
const nextBtn = document.getElementById("nextBtn");
const progressText = document.getElementById("progressText");
const progressBar = document.getElementById("progressBar");

function showQuestion() {
  const q = quizData[current];
  updateProgress();
  quizBox.innerHTML = `
    <div class='question'>${q.q}</div>
    <div class='choices'></div>
  `;
  const choicesContainer = quizBox.querySelector(".choices");
  q.c.forEach((choice, i) => {
    const btn = document.createElement("button");
    btn.className = "choice";
    btn.innerHTML = choice;
    btn.addEventListener("click", () => selectChoice(i));
    choicesContainer.appendChild(btn);
  });
  nextBtn.style.display = "none";
  selected = null;
}

function selectChoice(i) {
  selected = i;
  document.querySelectorAll(".choice").forEach((btn, idx) => {
    btn.classList.toggle("selected", idx === i);
    btn.disabled = true;
  });
  if (i === quizData[current].a) score++;
  nextBtn.style.display = "inline-block";
}

nextBtn.addEventListener("click", () => {
  current++;
  if (current < quizData.length) showQuestion();
  else showResult();
});

function updateProgress() {
  const percent = (current / quizData.length) * 100;
  progressBar.style.width = percent + "%";
  progressText.textContent = `Question ${current + 1} of ${quizData.length}`;
}

function getStarRating(percent) {
  if (percent === 100) return "‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è";
  else if (percent >= 90) return "‚≠êÔ∏è‚≠êÔ∏è‚òÜ";
  else if (percent >= 80) return "‚≠êÔ∏è‚òÜ‚òÜ";
  else return "‚òÜ‚òÜ‚òÜ";
}

function showResult() {
  progressBar.style.width = "100%";
  progressText.textContent = "Assessment Completed";
  const percent = Math.round((score / quizData.length) * 100);
  const passed = percent >= 80;

  quizBox.innerHTML = `
    <div class='stars'>${getStarRating(percent)}</div>
    <div class='result'>You scored ${score}/${quizData.length} (${percent}%)</div>
    <div class='quiz-nav'>
      <button class='quiz-btn' id='backBtn'>‚¨Ö Back</button>
      <button class='quiz-btn' id='retryBtn'>üîÅ Retry</button>
      <button class='quiz-btn primary' id='nextLessonBtn' ${passed ? "" : "disabled"}>‚û° Next Chapter</button>
    </div>
  `;

  nextBtn.style.display = "none";
  window.parent.postMessage({ type: "quizResult", score: percent, passed }, "*");

  document.getElementById("retryBtn").addEventListener("click", retryQuiz);
  document.getElementById("backBtn").addEventListener("click", () => window.parent.postMessage({ type: "quizBack" }, "*"));
  document.getElementById("nextLessonBtn").addEventListener("click", () => { if (passed) window.parent.postMessage({ type: "quizNextLesson" }, "*"); });
}

function retryQuiz() {
  current = 0;
  score = 0;
  showQuestion();
}

showQuestion();
</script>
</body>
</html>
